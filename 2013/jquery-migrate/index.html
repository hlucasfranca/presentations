---
title: The Wonders of the jQuery Migrate Plugin
date: 2013-01-30
---
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=1024" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<title>The Wonders of the jQuery Migrate Plugin - Mike Pennisi</title>
	<meta name="DC.created" content="2013-01-30" />

	<meta name="description" content="Learn about the inner workings of the jQuery Migrate plugin." />
	<meta name="author" content="Mike Pennisi" />

	<link href="styles/impress-demo.css" rel="stylesheet" />
	<link href="styles/prism.css" rel="stylesheet" />

	<link rel="shortcut icon" href="favicon.png" />
	<link rel="apple-touch-icon" href="apple-touch-icon.png" />
</head>
	<body class="impress-not-supported">

		<div class="fallback-message">
			<p>Your browser <b>doesn't support the features required</b> by impress.js, so you are presented with a simplified version of this presentation.</p>
			<p>For the best experience please use the latest <b>Chrome</b>, <b>Safari</b> or <b>Firefox</b> browser.</p>
		</div>

		<div id="impress">

<hgroup class="step" id="title" data-x="0" data-y="0">
	<h1>The Wonders of the jQuery Migrate Plugin</h1>
	<h2>Exploring Hidden Secrets</h2>
</hgroup>

<div class="step" id="overview" data-x="0" data-y="0" data-z="5000">
	<h1>Overview</h1>
	<ol>
		<li>What is the Migrate Plugin?</li>
		<li>Migration demonstration</li>
		<li>The migrate API</li>
		<li>Source code highlights</li>
	</ol>
</div>

<div class="step" id="who-am-i" data-x="0" data-y="1500" data-z="5000">
	<h1>Who am I?</h1>
	<ul>
		<li>Mike Pennisi</h2></li>
		<li>Front-end developer at <a href="http://bocoup.com">Bocoup</a></li>
	</ul>
	<img src="img/bob.png">
</div>

<div class="step" id="jquery1-9" data-x="0" data-y="1600">
	<h1>jQuery 1.9.0</h1>
	<p class="date">January 15, 2013</p>
	<ul>
		<li><code class="inline">.css()</code> multi-property getter</li>
		<li>improved cross-browser CSS support</li>
		<li>new <code class="inline">.finish()</code> method</li>
		<li>source map support</li>
		<li>bug fixes</li>
		<li>...also, breaking changes</li>
	</ul>
</div>

<div class="step" id="why" data-x="0" data-y="2500">
	<h1>Why is this happening to us?</h1>
	<blockquote>
		In making these changes, the team's goal was to fix behavior that makes
		jQuery inconsistent or hard to use, and in the process improve both
		file size and overall performance.
	</blockquote>
	<p class="attribution">
		-- <a href="http://jquery.com/upgrade-guide/1.9/">jQuery Core 1.9 Upgrade Guide</a>
	</p>
</div>

<div class="step" id="break-the-web" data-x="0" data-y="3400">
	<h1>"I've heard that 1.9.0 Breaks the Web&trade;."</h1>
</div>

<div class="step" id="this-breaks-web" data-x="0" data-y="3400" data-z="-8000">
	<h1>Nope. But this does!</h1>
	<code class="inline">&lt;script src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"&gt;&lt;/script&gt;</code>
</div>

<div class="step" id="live-demo" data-x="0" data-y="4300">
	<h1>Let's Migrate!</h1>
	<p>Check it out <a href="demo-app/">here</a></p>
</div>

<div class="step" id="migrate-api" data-x="1200" data-y="2500" data-rotate="-90">
	<h1>The Migrate API</h1>
</div>

<div class="step api-step" id="migrate-api-migrate-warnings" data-x="1100" data-y="2800" data-rotate="-90" data-scale="0.5">
	<h1><code class="inline">jQuery.migrateWarnings</code></h1>
	<p>An array of string warning messages that have been generated by the code on the page, in the order they were generated. Messages appear in the array only once, even if the condition has occurred multiple times, unless <code class="inline">jQuery.migrateReset()</code> is called.</p>
</div>

<div class="step api-step" id="migrate-api-migrate-mute" data-x="1100" data-y="2200" data-rotate="-90" data-scale="0.5">
	<h1><code class="inline">jQuery.migrateMute</code></h1>
	<p>A flag that controls the emission of warning messages in the developer console (debugging version only). The <code class="inline">jQuery.migrateWarnings</code> array is still maintained when this property is set, which allows programmatic inspection without console output.</p>
</div>

<div class="step api-step" id="migrate-api-migrate-trace" data-x="1300" data-y="2800" data-rotate="-90" data-scale="0.5">
	<h1><code class="inline">jQuery.migrateTrace</code></h1>
	<p>A flag that controls the emission of stack traces in the developer console.</p>
</div>


<div class="step api-step" id="migrate-api-migrate-reset" data-x="1300" data-y="2200" data-rotate="-90" data-scale="0.5">
	<h1><code class="inline">jQuery.migrateReset()</code></h1>
	<p>A method that clears the <code class="inline">jQuery.migrateWarnings</code> array and enables previously-logged messages to be displayed again.</p>
</div>

<div class="step" id="source-walkthrough" data-x="1500" data-y="1150" data-rotate="-90">
	<h1>Source walkthrough</h1>
	<p class="description">
		<a href="http://git.io/jq-migrate">git.io/jq-migrate</a>
	</p>
</div>

<div class="step" id="jquery-plugins" data-x="1400" data-y="0" data-rotate="-90">
	<h1>jQuery Plugin Repository</h1>
	<img src="img/jquery.png">
	<p class="description">a home for jQuery plugins</p>
	<ul>
		<li><a href="http://plugins.jquery.com">plugins.jquery.com</a></li>
		<li><a href="http://plugins.jquery.com/migrate/">http://plugins.jquery.com/migrate</a></li>
	</ul>
</div>

<div class="step code-step" id="plugin-manifest" data-x="1250" data-y="1500" data-rotate="-90" data-scale="0.3">
	<h1>migrate.jquery.json</h1>
	<pre class="code"><code class="lang-javascript">
{
	"name": "migrate",
	"title": "jQuery Migrate",
	"description": "Migrate older jQuery code to jQuery 1.9+",
	"keywords": [],
	"version": "1.0.0",
	"author": {
		"name": "jQuery Foundation, Inc. and other contributors",
		"url": "https://github.com/jquery/jquery-migrate/blob/1.0.0/AUTHORS.txt"
	},
	"licenses": [
		{
			"type": "MIT",
			"url": "https://github.com/jquery/jquery-migrate/blob/1.0.0/LICENSE-MIT"
		}
	],
	"bugs": {
		"url": "http://bugs.jquery.com/"
	},
	"homepage": "https://github.com/jquery/jquery-migrate",
	"docs": "https://github.com/jquery/jquery-migrate",
	"download": "https://github.com/jquery/jquery-migrate/blob/1.0.0/README.md#download",
	"dependencies": {
		"jquery": ">=1.6.4"
	}
}
	</code></pre>
</div>

<div class="step" id="grunt" data-x="2100" data-y="0" data-rotate="-90">
	<h1>Grunt</h1>
	<img src="img/grunt.png">
	<p class="description">a task-based build tool for JavaScript projects</p>
	<ul>
		<li><a href="http://gruntjs.com">gruntjs.com</a></li>
		<li><a href="http://twitter.com/gruntjs">@gruntjs</a></li>
		<li>#grunt</li>
	</ul>
</div>

<div class="step code-step" id="src-gruntfile-file-list" data-x="1250" data-y="1150" data-rotate="-90" data-scale="0.3">
	<h1>Gruntfile.js: file list</h1>
	<pre class="code"><code class="lang-javascript">
	// ...

	files: [
		"src/intro.js",
		"src/migrate.js",
		"src/attributes.js",
		"src/core.js",
		"src/data.js",
		"src/manipulation.js",
		"src/event.js",
		"src/outro.js"
	],

	// ...
	</code></pre>
</div>

<div class="step code-step" id="src-intro-outro" data-x="1250" data-y="800" data-rotate="-90" data-scale="0.3">
	<h1>intro.js</h1>
	<pre class="code"><code class="lang-javascript">
(function( jQuery, window, undefined ) {
"use strict";
	</code></pre>
	<h1>outro.js</h1>
	<pre class="code"><code class="lang-javascript">
})( jQuery, window );
	</code></pre>
</div>



<div class="step code-step" id="src-gruntfile-minify" data-x="1500" data-y="1500" data-rotate="-90" data-scale="0.3">
	<h1>Gruntfile.js: minification</h1>
	<pre class="code"><code class="lang-javascript">
  // ...

  uglify: {
    all: {
      files: {
        "dist/jquery-migrate.min.js": [
          "src/migratemute.js",
          "dist/jquery-migrate.js"
        ]
      }
    },
    options: {
      banner: "/*! jQuery Migrate v<%= pkg.version %> | (c) 2005, <%= grunt.template.today('yyyy') %> <%= pkg.author.name %> | jquery.org/license */\n",
      sourceMap: "dist/jquery-migrate.min.map",
      beautify: {
        ascii_only: true
      }
    }

  }

  // ...
	</code></pre>
</div>

<div class="step code-step" id="src-migratemute" data-x="1450" data-y="800" data-rotate="-90" data-scale="0.3">
	<h1>migratemute.js</h1>
	<pre class="code"><code class="lang-javascript">
// Included only in the minified build, via Uglify2
// Only turn warnings off if not already overridden
if ( typeof jQuery.migrateMute === "undefined" ) {
	jQuery.migrateMute = true;
}
	</code></pre>
</div>

<div class="step code-step" id="src-migrate-1" data-x="1750" data-y="1500" data-rotate="-90" data-scale="0.3">
	<h1>migrate.js</h1>
	<pre class="code"><code class="lang-javascript">
var warnedAbout = {};

// List of warnings already given; public read only
jQuery.migrateWarnings = [];

// Set to true to prevent console output;
// migrateWarnings still maintained
// jQuery.migrateMute = false;

// Set to false to disable traces that appear with
// warnings
if ( jQuery.migrateTrace === undefined ) {
	jQuery.migrateTrace = true;
}

// Forget any warnings we've already given; public
jQuery.migrateReset = function() {
	warnedAbout = {};
	jQuery.migrateWarnings.length = 0;
};

// ...
	</code></pre>
</div>

<div class="step code-step" id="src-migrate-2" data-x="1950" data-y="1500" data-rotate="-90" data-scale="0.3">
	<pre class="code"><code class="lang-javascript">
// ...

function migrateWarn( msg) {
  if ( !warnedAbout[ msg ] ) {
    warnedAbout[ msg ] = true;
    jQuery.migrateWarnings.push( msg );
    if ( window.console && console.warn && !jQuery.migrateMute ) {
      console.warn( "JQMIGRATE: " + msg );
      if ( jQuery.migrateTrace && console.trace ) {
        console.trace();
      }
    }
  }
}

// ...
	</code></pre>
</div>

<div class="step code-step" id="src-event-js" data-x="1950" data-y="1150" data-rotate="-90" data-scale="0.3">
	<h1>From event.js</h1>
	<pre class="code"><code class="lang-javascript">
// ...

jQuery.fn.toggle = function( fn, fn2 ) {

  // Don't mess with animation or css toggles
  if ( !jQuery.isFunction( fn ) ||
       !jQuery.isFunction( fn2 ) ) {

    return oldToggle.apply( this, arguments );
  }
  migrateWarn("jQuery.fn.toggle(handler, handler...) is deprecated");

// ...
	</code></pre>
</div>

<div class="step code-step" id="src-migrate-3" data-x="2200" data-y="1500" data-rotate="-90" data-scale="0.3">
	<pre class="code"><code class="lang-javascript">
// ...

function migrateWarnProp( obj, prop, value, msg ) {
  if ( Object.defineProperty ) {
    // On ES5 browsers (non-oldIE), warn if the code
    // tries to get prop; allow property to be
    // overwritten in case some other plugin wants it
    try {
      Object.defineProperty( obj, prop, {
        configurable: true,
        enumerable: true,
        get: function() {
          migrateWarn( msg );
          return value;
        },
        set: function( newValue ) {
          migrateWarn( msg );
          value = newValue;
        }
      });
      return;
    } catch( err ) {
      // IE8 is a dope about Object.defineProperty,
      // can't warn there
    }
  }

  // Non-ES5 (or broken) browser; just set the property
  jQuery._definePropertyBroken = true;
  obj[ prop ] = value;
}
	</code></pre>
</div>

<div class="step code-step" id="src-core-js" data-x="2200" data-y="1150" data-rotate="-90" data-scale="0.3">
	<h1>From core.js</h1>
	<pre class="code"><code class="lang-javascript">
// ...

// Warn if the code tries to get jQuery.browser
migrateWarnProp( jQuery, "browser", browser, "jQuery.browser is deprecated" );

// ...
	</code></pre>
</div>

<div class="step" id="resources" data-x="0" data-y="900">

	<h1>Resources</h1>

	<ul>
		<li>
			<a href="http://jquery.com/upgrade-guide/1.9/">jQuery Core 1.9 Upgrade Guide</a>
			<span class="link-source">(jquery.com)</span>
		</li>
		<li>
			<a href="https://github.com/jquery/jquery-migrate/">jQuery Migrate Plugin source code repository</a>
			<span class="link-source">(github.com)</span>
		</li>
		<li>
			<a href="http://plugins.jquery.com/docs/publish/">Publishing Your Plugin</a>
			<span class="link-source">(plugins.jquery.com)</span>
		</li>
		<li>
			<a href="http://blog.jquery.com/2013/01/15/jquery-1-9-final-jquery-2-0-beta-migrate-final-released/">jQuery 1.9 final, jQuery 2.0 beta, Migrate final released</a>
			<span class="link-source">(blog.jquery.com)</span>
		</li>
		<li>
			<a href="http://blog.jquery.com/2013/01/16/announcing-the-jquery-plugin-registry/">Announcing the jQuery Plugin Registry</a>
			<span class="link-source">(blog.jquery.com)</span>
		</li>
		<li>
			<a href="https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty"><code class="inline">Object.defineProperty</code></a>
			<span class="link-source">(developer.mozilla.org)</span>
		</li>
		<li>
			<a href="http://ejohn.org/blog/javascript-getters-and-setters/">JavaScript Getters and Setters</a>
			<span class="link-source">(ejohn.org)</span>
		</li>
		<li>
			<a href="http://weblog.bocoup.com/easily-test-jquery-pre-release-versions/">Easily Test jQuery Pre-Release Versions</a>
			<span class="link-source">(bocoup.com)</span>
		</li>
	</ul>

</div>

		</div>

		<div class="hint">
			<p>Use a spacebar or arrow keys to navigate</p>
		</div>
		<script>
		if ("ontouchstart" in document.documentElement) { 
			document.querySelector(".hint").innerHTML = "<p>Tap on the left or right to navigate</p>";
		}
		</script>

		<script src="scripts/impress.js"></script>
		<script src="scripts/prism.js"></script>
		<script>impress().init();</script>

	</body>
</html>
